<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">




    <meta name="keywords" content=""/>



    <meta name="description" content=""/>


<meta name="Robots" content="all">


    <title>Augustxuesong</title>


<link rel="icon" href="/images/favicon.ico">

<link rel="stylesheet" href="/css/font-awesome.min.css">


<link rel="stylesheet" href="/css/atom-one-dark.css">


<link rel="stylesheet" href="/css/style.css">


<script src="/js/highlight.min.js"></script>

<meta name="generator" content="Hexo 5.2.0"></head>
<body>
    <div class="main-container">
        <header class="header">
    <div class="global-width">
        <nav class="nav-box">
            
                <a class="nav-item" href="/"
                
                >Home</a>
            
                <a class="nav-item" href="/resume"
                
                >Resume</a>
            
                <a class="nav-item" href="/mood"
                
                   target="_blank"
                
                >Mood</a>
            
                <a class="nav-item" href="/amusement/tetris"
                
                   target="_blank"
                
                >Amusement</a>
            
                <a class="nav-item" href="/about"
                
                >About</a>
            
        </nav>
    </div>
</header>

        <section class="content global-width">
            <div class="main">
                
    
        <article class="box post post-item">
            <div class="post-title"><a href="/2020/06/03/Maven%E7%9F%A5%E8%AF%86%E5%BA%93/">Maven知识库</a></div>
            <div class="post-meta">
                
                <i class="fa fa-calendar"></i> <time>2020-06-03</time>
                <span class="dotted">|</span>
                <i class="fa fa-user"></i> 
            </div>

            <div class="post-excerpt">
                <a href="/2020/06/03/Maven%E7%9F%A5%E8%AF%86%E5%BA%93/">
                    <p>
                        
                            MavenMaven的作用？1.添加第三方jar包
2.解决jar包之间的依赖关系
3.获取第三方jar包
4.将项目拆成多个工程模块
Maven 是什么？是Apache软件基金会组织维护的一款自动化构建工具，专注服务于 Java 平台的项目构建和依赖管理。
构建过程1.清理：删除以前的编译结果，为重新编译做好准备。
2.编译：将 Java 源程序为字编译为节码文件。
3.测试：针对项目中的关键点进行测试，确保项目在迭代开发过程中关键点的正确性。
4.报告：在每一次测试后以标准的格式记录和展示测试结果
5.打包：将一个包含诸多文件的工程封装为一个压缩文件用于安装或部署。Java 工程对应 jar 包，Web 工程对应 war 包。
6.安装：在 Maven 环境下特指将打包的结果—— jar 包或 war 包安装到本地仓库。
7.部署：将打包的结果部署到远程仓库或将 war 包部署到服务器上运行。
Maven 核心概念1.POM
2.约定的目录结构
3.坐标
4.依赖管理
5.仓库管理
6.生命周期
7.插件和目标
8.继承
9.聚合
原理与约定Maven 的核心程序中仅仅定义了抽象的声明周期，具体的操作是由 Maven 的插件完成的。Maven 的插件不包含在 Maven 的核心程序中，在首次使用时需要联网下载。
下载的插件被保存在本地仓库，本地仓库的默认位置是：~.m2\repository
约定的目录结构对于 Maven 实现自动化构建是必不可缺的一环，Maven 必须能找到 Java 源文件，编译后的字节码也有一个存储的位置，所以约定至关重要。
项目
  src
​    main
​      java
​      resources
​    test
​      java
​      resources
target
src：源码目录 main：主程序目录 main-&gt;java：主程序的Java源文件目录 main-&gt;resources：主程序的资源文件目录 test：测试程序目录 test-&gt;java：测试程序的Java源文件目录 test-&gt;resources：测试程序的资源文件目录
POMProject Object Model：项目对象模型。将 Java 工程的相关信息封装为对象作为便于操作和管理的模型。Maven 工程的核心配置。可以说学习 Maven 就是学习 pom.xml 文件中的配置。
Maven 坐标
在空间中需要 x、y、z三个向量确定一个点
使用如下三个向量在 Maven 的仓库中唯一的确定一个 Maven 工程(gav)。
1.groupid：公司或组织的域名倒叙+当前项目名称
2.artifactid：当前项目的模块名称
3.version：当前模块的版本
com.ihdou.maven
Hello
0.0.1-SNAPSHOT
使用命令 mvn install 执行安装后 Maven 工程进入仓库，通过两个步骤查找 jar 包。
1.将 gav 三个向量连起来
1com. ihdou.maven+Hello+0.0.1-SNAPSHOT

2.以连起来的的字符串作为目录结构到仓库中查找
1com&#x2F; ihdou &#x2F;maven&#x2F;Hello&#x2F;0.0.1-SNAPSHOT&#x2F;Hello-0.0.1-SNAPSHOT.jar

依赖使用 Maven 就是为了使用它的依赖功能，当 A jar 包用到了 B jar 包的某些类时，A 对 B 产生了依赖。
实现依赖：
123456&lt;dependency&gt;    &lt;groupId&gt;com.ihdou.maven&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;Hello&lt;&#x2F;artifactId&gt;    &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;    &lt;scope&gt;compile&lt;&#x2F;scope&gt;&lt;&#x2F;dependency&gt;

依赖的范围有：compile(编译)、test(测试)、provided(部署)
依赖的传递：A 依赖 B，B 依赖 C ，A 是否能使用 C？要看 B 依赖 C 的范围是不是 compile
依赖的排除：
12345678910111213&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;com.ihdou&lt;&#x2F;groupId&gt;        &lt;artifactId&gt;TestDB&lt;&#x2F;artifactId&gt;        &lt;version&gt;1.0.0-SNAPSHOT&lt;&#x2F;version&gt;        &lt;exclusions&gt;            &lt;exclusion&gt;                &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;                &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;            &lt;&#x2F;exclusion&gt;        &lt;&#x2F;exclusions&gt;    &lt;&#x2F;dependency&gt;&lt;&#x2F;dependencies&gt;

对版本号进行统一： 1.统一声明版本号
123&lt;properties&gt;    &lt;mysql-connector.version&gt;5.1.47&lt;&#x2F;mysql-connector.version&gt;&lt;&#x2F;properties&gt;

2.引用前面声明的版本号：
12345&lt;dependency&gt;    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;    &lt;version&gt;$&#123;mysql-connector.version&#125;&lt;&#x2F;version&gt;&lt;&#x2F;dependency&gt;

仓库仓库有本地仓库和远程仓库，远程仓库包含私服、中央仓库、中央仓库的镜像。
仓库中存储的文件有 Maven 的插件、我们自己开发的项目的模块、第三方框架或工具的 jar 包
生命周期Maven 生命周期定义了各个构建缓解的执行顺序，有了这个清单，Maven 就可以自动化的执行构建命令了。
有3套相互独立的生命周期，分别是：
\1. Clean Lifecycle 在进行真正的构建之前进行的一些清理工具。
\2. Default Lifecycle 构建的核心部分，编译，测试，打包，安装部署等等。
\3. Site Lifecycle 生成项目报告，站点，发布站点
它们是相互独立的，你可以仅仅调用 clean 来清理工作目录，仅仅调用 site 来生成站点。也可以直接运行 mvn clean install site 运行所有这三套声明周期
Clean 生命周期的阶段：
\1. pre-clean 执行一些需要在 clean 之前完成的工作
\2. clean 移除所有上一次构建生成的文件
\3. post-clean 执行一些需要在 clean 之后立刻完成的工作
Site 生命周期的阶段：
\1.   pre-site 执行一些需要在生成站点文档之前完成的工作
\2.   site 生成项目的站点文档
\3.   post-site 执行一些需要在生成站点文档之后完成的工作，并且为部署做准备
\4.   site-deploy 将生成的站点文档部署到特定的服务器上
Default 生命周期的阶段
Default 生命周期是 Maven 生命周期中最重要的一个，绝大部分工作都发生在这个生命周期中。这里，只解释一些比较重要和常用的阶段：
validate
generate-sources
process-sources
generate-resources
process-resources 复制并处理资源文件，至目标目录，准备打包
compile 编译项目的源代码
process-classes
generate-test-sources
process-test-sources
generate-test-resources
process-test-resources 复制并处理资源文件，至目标测试目录
test-compile 编译测试源代码
process-test-classes
test 使用合适的单元测试框架运行测试。这些测试代码不会被打包或部署
prepare-package
package 接受编译好的代码，打包成可发布的格式，如 JAR
pre-integration-test
integration-test
verify
install 将包安装至本地仓库，以让其他项目依赖
deploy 将最终的包复制到远程的仓库，以让其他开发人员与项目共享或部署到服务器上运行
运行任何一个阶段的时候，它前面的所有阶段都会被运行
插件和目标Maven 的核心仅仅定义了抽象的声明周期，具体的任务都是交给插件完成的。
每个插件都能实现多个功能，每个功能就是一个插件目标
Maven 的声明周期与插件目标相互绑定，以完成某个具体的构建任务
继承非 compile 范文的依赖信息是不能在“依赖链”中传递的，所以有需要的工程只能单独配置。



工程
依赖



Hello
&lt;dependency&gt;&lt;groupId&gt;junit&lt;/groupId&gt;&lt;artifactId&gt;junit&lt;/artifactId&gt;&lt;version&gt;4.0&lt;/version&gt;&lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;


HelloFriend
&lt;dependency&gt;&lt;groupId&gt;junit&lt;/groupId&gt;&lt;artifactId&gt;junit&lt;/artifactId&gt;&lt;version&gt;4.0&lt;/version&gt;&lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;


MakeFriend
&lt;dependency&gt;&lt;groupId&gt;junit&lt;/groupId&gt;&lt;artifactId&gt;junit&lt;/artifactId&gt;&lt;version&gt;4.0&lt;/version&gt;&lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;


如果将各模块的版本统一为 4.9，各个模块单独修改是不可取的，可以使用继承机制将依赖信息统一提取到父工程模块中进行统一管理。
实现继承1.创建父工程：打包方式设置为 pom
2.在子工程中引用父工程
1234567&lt;parent&gt;    &lt;!-- 父工程坐标 --&gt;    &lt;groupId&gt;...&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;...&lt;&#x2F;artifactId&gt;    &lt;version&gt;...&lt;&#x2F;version&gt;    &lt;relativePath&gt;从当前目录到父项目的 pom.xml文件的相对路径&lt;&#x2F;relativePath&gt;&lt;&#x2F;parent&gt;

如果此时子工程的 groupId 和 version 和父工程重复则可以删除
3.在父工程中管理依赖 将 Parent 项目中的 dependencies 标签，用 dependencyManagement 标签括起来
123456789&lt;dependencyManagement&gt;    &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;log4j&lt;&#x2F;groupId&gt;            &lt;artifactId&gt;log4j&lt;&#x2F;artifactId&gt;            &lt;version&gt;1.2.17&lt;&#x2F;version&gt;        &lt;&#x2F;dependency&gt;    &lt;&#x2F;dependencies&gt;&lt;&#x2F;dependencyManagement&gt;

在子项目中重新制定需要的依赖，删除范围和版本号
123456 &lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;log4j&lt;&#x2F;groupId&gt;        &lt;artifactId&gt;log4j&lt;&#x2F;artifactId&gt;    &lt;&#x2F;dependency&gt;&lt;&#x2F;dependencies&gt;

聚合(多模块)将多个工程拆分为模块后，需要手动逐个安装到仓库后依赖才能够生效。修改源码后也需药逐个手动进行 clean 操作。而使用了聚合之后就可以批量进行 Maven 工程的安装、清理工作。
配置聚合：
在总的聚合工程中使用 modules/module 标签组合，指定模块工程的相对路径集合
1234&lt;modules&gt;    &lt;module&gt;test&lt;&#x2F;module&gt;    &lt;module&gt;b&lt;&#x2F;module&gt;&lt;&#x2F;modules&gt;


                        
                    </p>
                </a>
            </div>

            
        </article>
    

    
        <article class="box post post-item">
            <div class="post-title"><a href="/2020/06/03/Redis%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/">Redis集群安装部署</a></div>
            <div class="post-meta">
                
                <i class="fa fa-calendar"></i> <time>2020-06-03</time>
                <span class="dotted">|</span>
                <i class="fa fa-user"></i> 
            </div>

            <div class="post-excerpt">
                <a href="/2020/06/03/Redis%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/">
                    <p>
                        
                            Redis1  Redis下载从该网站http://www.redis.net.cn/下载redis稳定版本[Redis 5.0.4](http://download.redis.io/releases/redis-3.0.6.tar.gz)(redis-5.0.4.tar.gz)。
模式: 三主三从
5.0版本后不需要ruby支持，其底层改由C实现
主从配置、leader选举由redis自己实现
1.1 测试服务器操作系统: centos
192.168.102.33:6379 192.168.102.33:6380
192.168.102.34:6379 192.168.102.34:6380
192.168.102.35:6379 192.168.102.35:6380
1.2 安装redisyum install gcc
yum install tcl
make 安装需要gcc和tcl
#在集群服务器做出以下操作：
cd /usr/local/
tar xzf redis-5.0.4.tar.gz
cd redis-5.0.4
执行make install
至此redis安装完成
运行#make test 测试
2  redis配置文件cp redis.conf nodes-6379.conf 
cp redis.conf nodes-6380.conf
分别编辑nodes-6379.conf 、nodes-6380.conf
#bind 127.0.0.1（注释掉）
daemonize yes  //后台启动
port 6379（分别对每个机器的端口号进行设置）
dir /usr/local/redis-data/6379/（指定数据文件存放位置，必须要指定不同的目录位置，不然会丢失数据）
cluster-enabled yes（启动集群模式）
cluster-config-file nodes-6379.conf（集群节点信息文件，这里63xx最好和port对应上）
cluster-node-timeout 5000
protected-mode no  （关闭保护模式）
appendonly yes （启动：设置yes,修改默认的appendonly no,改为yes
将有数据的aof文件复制一份保存到对应目录(config get dir)
恢复：重启redis然后重新加载） 
requirepass admin （配置redis服务器密码，不配的话jedis连接会报如下错误）
以上配置每台都需要调整，nodes-6379.conf，nodes-6380.conf
3  启动redis实例cd /usr/local/
mkdir redis-data/6379
mkdir redis-data/6380
Redis启动时不会自动创建数据文件存放目录，启动前手动创建
cd /usr/local/ redis-5.0.4/scr
启动
./redis-server ../nodes-6379.conf
./redis-server ../nodes-6380.conf
以此步骤启动每个机器上的redis实例
4  redis配置集群任选一台 我这使用192.168.102.33
cd /usr/local/redis-5.0.4/src/
./redis-cli –cluster create –cluster-replicas 1 192.168.102.33:6379 192.168.102.33:6380 192.168.102.34:6379 192.168.102.34:6380 192.168.102.35:6379 192.168.102.35:6380 –cluster-replicas 1 -a admin
注意–cluster-replicas 1 -a admin 带上密码 否则集群创建不成功
以上redis5.0.4集群搭建完毕
5  测试
                        
                    </p>
                </a>
            </div>

            
        </article>
    



            </div>
            <div class="aside">
    
        <div class="box widget">
    <div class="introduction">
        <p><img src="/images/avatar.jpg" alt="head-sculpture" /></p>
        <p class="name">
            xuesongtan
        </p>
        <p class="slogan">流连矣 忘景幻云催 峦栈醺醺说旧梦 重山迟迟映霞辉 向晚共邀归</p>
    </div>
</div>
    
        
<div class="box widget">
    <div class="title">Recent</div>
    <ul class="item-box">
        
            
                <li><a href="/2020/12/03/Docker%E6%95%99%E7%A8%8B%E8%AE%B2%E8%A7%A3/">Docker 教程讲解</a></li>
            
        
            
                <li><a href="/2020/11/03/Docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E6%90%AD%E5%BB%BA/">Docker 搭建私有仓库</a></li>
            
        
            
                <li><a href="/2020/10/03/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Docker 命令大全</a></li>
            
        
            
                <li><a href="/2020/09/03/Dockerfile%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/">Docker Dockerfile</a></li>
            
        
            
                <li><a href="/2020/08/03/Elasticsearch%E9%9B%86%E7%BE%A4/">Elasticsearch集群搭建</a></li>
            
        
            
                <li><a href="/2020/07/03/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程讲解</a></li>
            
        
            
                <li><a href="/2020/06/03/Maven%E7%9F%A5%E8%AF%86%E5%BA%93/">Maven知识库</a></li>
            
        
            
                <li><a href="/2020/06/03/Redis%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/">Redis集群安装部署</a></li>
            
        
    </ul>
</div>

    
        
    
        
  <div class="box widget">
    <div class="title">Archives</div>
    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">2020-12</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">2020-11</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">2020-10</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">2020-09</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">2020-08</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">2020-07</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">2020-06</a><span class="archive-list-count">2</span></li></ul>
  </div>

    
        
    
</div>
        </section>
        <footer class="footer">
    <div class="global-width footer-box">
        <div class="copyright">
            <span>Copyright &copy; 2019</span>
            <span class="dotted">|</span>
            <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span>
            <span class="dotted">|</span>
            <span>Theme by <a href="javascript:">Loren</a></span>
            <span class="dotted">|</span>
            <span><a target="_blank" rel="noopener" href="http://www.beian.miit.gov.cn">浙ICP备18016660号-1</a></span>
        </div>
    </div>
</footer>
    </div>

<script>
    hljs.initHighlightingOnLoad();
</script>
</body>
</html>